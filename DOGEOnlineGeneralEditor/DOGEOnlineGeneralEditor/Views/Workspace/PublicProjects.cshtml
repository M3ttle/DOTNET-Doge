@using DOGEOnlineGeneralEditor.Models.ViewModels;
@model PublicProjectsViewModel

@{
    ViewData["Title"] = "Public Projects";
}

@Scripts.Render("~/bundles/jquery")

@{Html.RenderPartial("_ProjectsNav"); }

<div class="project-table">
    <input type="text" class="search-box" placeholder="Search.." id="public-search">
    <button class="create-button" onclick="location.href='@Url.Action("Create", "Project")';return false;">Create New</button>
    <button class="open-button">Open Project</button>
    <div class="scroll-big">
        
        <table id="public-projcets">
            <thead>
                <tr>
                    <th data-sortable="true">Name of project</th>
                    <th>Number of Files</th>
                    <th>Owner</th>
                    <th>Date Created</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.PublicProjects)
                {
                    <tr>
                        <td>@Html.ActionLink(item.Name, "Details", "Project", new { id = item.ProjectID }, null)</td>
                        <td>@item.FileCount</td>
                        <td>@item.Owner</td>
                        <td>@item.DateCreated</td>
                        <td class="id-col">@item.ProjectID</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>


<script>
    $("#public-projcets tbody tr").click(function () {
        $('#public-projcets tr').removeClass('highlighted'); dell
        $(this).addClass('highlighted');
    });

    $(".open-button").on('click', function (e) {
        var ID = $('.highlighted td:nth-child(5)').html();
        window.location.href = '/Project/Details/' + ID;
    });


    var $prows = $('#public-projcets tbody tr');
    $('#public-search').keyup(function () {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $prows.show().filter(function () {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).hide();
    });
</script>
