@using DOGEOnlineGeneralEditor.Models.ViewModels
@model FileViewModel

@{
    ViewData["Title"] = "Editor";
}

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/ace")

@Scripts.Render("~/bundles/signalr")
<script src="~/signalr/hubs"></script>

@{Html.RenderPartial("_ProjectsNav"); }

@using (Html.BeginForm("Save", "File", FormMethod.Post, null))
{
    @Html.AntiForgeryToken()

    <div class="form-inline">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.ID)

        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.LanguageTypeID, "LanguageTypeID", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("LanguageTypeID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.LanguageTypeID, "", new { @class = "text-danger" })
            </div>
        </div>
        
        @Html.HiddenFor(m => m.Data, new { @id = "hiddenEditor"})

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input id="saveBtn" name="saveBtn" type="submit" value="Save" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<header class="header">
    <div class="innertube">
        <div class="topbar">
            <button id="inviteuser">Invite User</button>
            <button id="savefile">Save</button>

            <label for="mode">Mode</label>

            <select id="mode" size="1">
                <option value="ace/mode/abap">ABAP</option>
                <option value="ace/mode/abc">ABC</option>
                <option value="ace/mode/actionscript">ActionScript</option>
                <option value="ace/mode/ada">ADA</option>
                <option value="ace/mode/apache_conf">Apache Conf</option>
                <option value="ace/mode/asciidoc">AsciiDoc</option>
                <option value="ace/mode/assembly_x86">Assembly x86</option>
                <option value="ace/mode/autohotkey">AutoHotKey</option>
                <option value="ace/mode/batchfile">BatchFile</option>
                <option value="ace/mode/bro">Bro</option>
                <option value="ace/mode/c_cpp">C and C++</option>
                <option value="ace/mode/c9search">C9Search</option>
                <option value="ace/mode/cirru">Cirru</option>
                <option value="ace/mode/clojure">Clojure</option>
                <option value="ace/mode/cobol">Cobol</option>
                <option value="ace/mode/coffee">CoffeeScript</option>
                <option value="ace/mode/coldfusion">ColdFusion</option>
                <option value="ace/mode/csharp">C#</option>
                <option value="ace/mode/css">CSS</option>
                <option value="ace/mode/curly">Curly</option>
                <option value="ace/mode/d">D</option>
                <option value="ace/mode/dart">Dart</option>
                <option value="ace/mode/diff">Diff</option>
                <option value="ace/mode/dockerfile">Dockerfile</option>
                <option value="ace/mode/dot">Dot</option>
                <option value="ace/mode/drools">Drools</option>
                <option value="ace/mode/dummy">Dummy</option>
                <option value="ace/mode/dummysyntax">DummySyntax</option>
                <option value="ace/mode/eiffel">Eiffel</option>
                <option value="ace/mode/ejs">EJS</option>
                <option value="ace/mode/elixir">Elixir</option>
                <option value="ace/mode/elm">Elm</option>
                <option value="ace/mode/erlang">Erlang</option>
                <option value="ace/mode/forth">Forth</option>
                <option value="ace/mode/fortran">Fortran</option>
                <option value="ace/mode/ftl">FreeMarker</option>
                <option value="ace/mode/gcode">Gcode</option>
                <option value="ace/mode/gherkin">Gherkin</option>
                <option value="ace/mode/gitignore">Gitignore</option>
                <option value="ace/mode/glsl">Glsl</option>
                <option value="ace/mode/gobstones">Gobstones</option>
                <option value="ace/mode/golang">Go</option>
                <option value="ace/mode/groovy">Groovy</option>
                <option value="ace/mode/haml">HAML</option>
                <option value="ace/mode/handlebars">Handlebars</option>
                <option value="ace/mode/haskell">Haskell</option>
                <option value="ace/mode/haskell_cabal">Haskell Cabal</option>
                <option value="ace/mode/haxe">haXe</option>
                <option value="ace/mode/hjson">Hjson</option>
                <option value="ace/mode/html">HTML</option>
                <option value="ace/mode/html_elixir">HTML (Elixir)</option>
                <option value="ace/mode/html_ruby">HTML (Ruby)</option>
                <option value="ace/mode/ini">INI</option>
                <option value="ace/mode/io">Io</option>
                <option value="ace/mode/jack">Jack</option>
                <option value="ace/mode/jade">Jade</option>
                <option value="ace/mode/java">Java</option>
                <option value="ace/mode/javascript">JavaScript</option>
                <option value="ace/mode/json">JSON</option>
                <option value="ace/mode/jsoniq">JSONiq</option>
                <option value="ace/mode/jsp">JSP</option>
                <option value="ace/mode/jsx">JSX</option>
                <option value="ace/mode/julia">Julia</option>
                <option value="ace/mode/kotlin">Kotlin</option>
                <option value="ace/mode/latex">LaTeX</option>
                <option value="ace/mode/less">LESS</option>
                <option value="ace/mode/liquid">Liquid</option>
                <option value="ace/mode/lisp">Lisp</option>
                <option value="ace/mode/livescript">LiveScript</option>
                <option value="ace/mode/logiql">LogiQL</option>
                <option value="ace/mode/lsl">LSL</option>
                <option value="ace/mode/lua">Lua</option>
                <option value="ace/mode/luapage">LuaPage</option>
                <option value="ace/mode/lucene">Lucene</option>
                <option value="ace/mode/makefile">Makefile</option>
                <option value="ace/mode/markdown">Markdown</option>
                <option value="ace/mode/mask">Mask</option>
                <option value="ace/mode/matlab">MATLAB</option>
                <option value="ace/mode/maze">Maze</option>
                <option value="ace/mode/mel">MEL</option>
                <option value="ace/mode/mushcode">MUSHCode</option>
                <option value="ace/mode/mysql">MySQL</option>
                <option value="ace/mode/nix">Nix</option>
                <option value="ace/mode/nsis">NSIS</option>
                <option value="ace/mode/objectivec">Objective-C</option>
                <option value="ace/mode/ocaml">OCaml</option>
                <option value="ace/mode/pascal">Pascal</option>
                <option value="ace/mode/perl">Perl</option>
                <option value="ace/mode/pgsql">pgSQL</option>
                <option value="ace/mode/php">PHP</option>
                <option value="ace/mode/powershell">Powershell</option>
                <option value="ace/mode/praat">Praat</option>
                <option value="ace/mode/prolog">Prolog</option>
                <option value="ace/mode/properties">Properties</option>
                <option value="ace/mode/protobuf">Protobuf</option>
                <option value="ace/mode/python">Python</option>
                <option value="ace/mode/r">R</option>
                <option value="ace/mode/razor">Razor</option>
                <option value="ace/mode/rdoc">RDoc</option>
                <option value="ace/mode/rhtml">RHTML</option>
                <option value="ace/mode/rst">RST</option>
                <option value="ace/mode/ruby">Ruby</option>
                <option value="ace/mode/rust">Rust</option>
                <option value="ace/mode/sass">SASS</option>
                <option value="ace/mode/scad">SCAD</option>
                <option value="ace/mode/scala">Scala</option>
                <option value="ace/mode/scheme">Scheme</option>
                <option value="ace/mode/scss">SCSS</option>
                <option value="ace/mode/sh">SH</option>
                <option value="ace/mode/sjs">SJS</option>
                <option value="ace/mode/smarty">Smarty</option>
                <option value="ace/mode/snippets">snippets</option>
                <option value="ace/mode/soy_template">Soy Template</option>
                <option value="ace/mode/space">Space</option>
                <option value="ace/mode/sql">SQL</option>
                <option value="ace/mode/sqlserver">SQLServer</option>
                <option value="ace/mode/stylus">Stylus</option>
                <option value="ace/mode/svg">SVG</option>
                <option value="ace/mode/swift">Swift</option>
                <option value="ace/mode/tcl">Tcl</option>
                <option value="ace/mode/tex">Tex</option>
                <option value="ace/mode/text">Text</option>
                <option value="ace/mode/textile">Textile</option>
                <option value="ace/mode/toml">Toml</option>
                <option value="ace/mode/tsx">TSX</option>
                <option value="ace/mode/twig">Twig</option>
                <option value="ace/mode/typescript">Typescript</option>
                <option value="ace/mode/vala">Vala</option>
                <option value="ace/mode/vbscript">VBScript</option>
                <option value="ace/mode/velocity">Velocity</option>
                <option value="ace/mode/verilog">Verilog</option>
                <option value="ace/mode/vhdl">VHDL</option>
                <option value="ace/mode/wollok">Wollok</option>
                <option value="ace/mode/xml">XML</option>
                <option value="ace/mode/xquery">XQuery</option>
                <option value="ace/mode/yaml">YAML</option>
                <option value="ace/mode/django">Django</option>
            </select>

            <label for="theme">Theme</label>

            <select id="theme" size="1">
                <optgroup label="Bright"><option value="ace/theme/chrome">Chrome</option><option value="ace/theme/clouds">Clouds</option><option value="ace/theme/crimson_editor">Crimson Editor</option><option value="ace/theme/dawn">Dawn</option><option value="ace/theme/dreamweaver">Dreamweaver</option><option value="ace/theme/eclipse">Eclipse</option><option value="ace/theme/github">GitHub</option><option value="ace/theme/iplastic">IPlastic</option><option value="ace/theme/solarized_light">Solarized Light</option><option value="ace/theme/textmate">TextMate</option><option value="ace/theme/tomorrow">Tomorrow</option><option value="ace/theme/xcode">XCode</option><option value="ace/theme/kuroir">Kuroir</option><option value="ace/theme/katzenmilch">KatzenMilch</option><option value="ace/theme/sqlserver">SQL Server</option></optgroup>
                <optgroup label="Dark"><option value="ace/theme/ambiance">Ambiance</option><option value="ace/theme/chaos">Chaos</option><option value="ace/theme/clouds_midnight">Clouds Midnight</option><option value="ace/theme/cobalt">Cobalt</option><option value="ace/theme/gruvbox">Gruvbox</option><option value="ace/theme/idle_fingers">idle Fingers</option><option value="ace/theme/kr_theme">krTheme</option><option value="ace/theme/merbivore">Merbivore</option><option value="ace/theme/merbivore_soft">Merbivore Soft</option><option value="ace/theme/mono_industrial">Mono Industrial</option><option value="ace/theme/monokai">Monokai</option><option value="ace/theme/pastel_on_dark">Pastel on dark</option><option value="ace/theme/solarized_dark">Solarized Dark</option><option value="ace/theme/terminal">Terminal</option><option value="ace/theme/tomorrow_night">Tomorrow Night</option><option value="ace/theme/tomorrow_night_blue">Tomorrow Night Blue</option><option value="ace/theme/tomorrow_night_bright">Tomorrow Night Bright</option><option value="ace/theme/tomorrow_night_eighties">Tomorrow Night 80s</option><option value="ace/theme/twilight">Twilight</option><option value="ace/theme/vibrant_ink">Vibrant Ink</option></optgroup>
            </select>
        </div>
</div>
</header>

<input value="@Model.ID" id="fileID" name="fileID" type="hidden">
<div id="editor"> @Model.Data</div>
<input type="hidden" id="userNameLogged" name="userNameLogged" value="@HttpContext.Current.User.Identity.Name" />

<script>
    $(function () {
        
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");
        editor.getSession().setUseWrapMode(true);
        //editor.setHighlightActiveLine(false);
        //document.getElementById('editor').style.fontSize = '12px';
        editor.setShowPrintMargin(false);
        editor.focus();
        
        $("#mode").change(function () {
            var mode = $("#mode").val();
            editor.getSession().setMode(mode);
        });

        $("#theme").change(function () {
            var theme = $("#theme").val();
            editor.setTheme(theme);
        });

        // Copy the contents of the editor into our hidden editor for further processing
        $("form").submit(function () {
            $("#hiddenEditor").val(editor.getSession().getValue());
        });

    });// End of document ready

</script>
<script src="~/Scripts/editorHubProxy.js"></script>